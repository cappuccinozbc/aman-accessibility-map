# 路网可达性地图 v3 🗺️

基于高德地图API的城市步行可达性分析工具。

## 快速开始

### 访问应用

- **主应用**: http://172.31.0.2:8080/index.html
- **调试页面**: http://172.31.0.2:8080/debug.html

### 基本使用

1. 设置中心点经纬度
2. 设置步行时间（分钟）
3. 点击"获取路网数据"
4. 点击"搜索可达范围"
5. 查看可视化结果

## 功能特性

### 核心功能
- 🚶 **路网获取**: 从高德地图API获取区域路网数据
- 📍 **可达性计算**: 基于步行时间计算可达范围
- 👁️ **可视化**: 显示节点、道路、可达范围
- ✏️ **编辑功能**: 手动添加/删除节点和道路
- 📊 **数据导出**: 导出路网、可达节点、统计报告
- 💾 **保存/对比**: 保存状态并进行对比

### 编辑模式
- **查看模式**: 点击地图查看坐标
- **添加节点**: 点击地图添加路网节点
- **添加道路**: 连接两个节点创建道路
- **删除模式**: 删除节点或道路

## 调试

### 打开调试面板
按 `Ctrl/Cmd+D` 打开实时调试面板

### 查看浏览器控制台
按 `F12` 打开开发者工具查看详细日志

### 使用调试页面
访问 `debug.html` 进行独立测试

## 技术说明

### 算法
- 使用 Dijkstra 算法计算最短路径
- 支持多点采样获取路网
- 可视化使用凸包算法

### API使用
- **地图显示**: 高德 JavaScript API v2.0
- **路径规划**: 高德 Web服务 API (步行路径)
- **步行速度**: 5km/h (83.33m/s)

## 部署

### 当前部署
- 服务器IP: 172.31.0.2
- 端口: 8080
- 服务: Python SimpleHTTPServer

### 重启服务
```bash
/root/.openclaw/workspace/aman-accessibility-map/v3/start.sh
```

### 查看日志
```bash
tail -f /tmp/http_server.log
```

## 注意事项

1. **API配额**: 高德API有每日调用次数限制
2. **网络要求**: 需要能访问高德地图API
3. **浏览器要求**: 现代浏览器 (Chrome、Firefox、Edge)
4. **隐私保护**: 所有数据在本地处理，不上传到服务器

## 文件说明

- `index.html` - 主应用
- `debug.html` - 调试页面
- `ROAD_NETWORK_CODE.js` - 路网处理代码
- `start.sh` - 启动脚本
- `DEPLOY.md` - 部署文档
- `FIXES.md` - 修复记录

## 开发者

如需技术支持或提出建议，请联系开发团队。

---

版本: v3.0
更新日期: 2026-02-14
